# F. 友谊地久天长

题目链接：[友谊地久天长 - Problem - QOJ.ac](https://qoj.ac/contest/2606/problem/14945)

## Solution

令起点分别为$sx$和$sy$

可以显而易见的发现，如果$sx$和$sy$之间没有连边，那么直接让所有连向$sx$和$sy$的边指向$sx$和$sy$即可

如果$sx$和$sy$之间有连边，讨论以下两种情况：

1. 如果有经过$sx$和$sy$的简单环（无环套环）。那么找到这个环，形成循环，然后让其他不在环上的点指向环即可
2. 如果找不到，那么找到全图**最小环**，并且$sx$和$sy$一定是通过一条链指向这个最小环，由于找最小环的时候就标记了$fa_u$，如果$fa_{sx}=sy$，则起点为$sx$，如果$fa_{sy}=sx$，则起点为$sy$​（）因为是一条链，所以一定满足其一。再从起点开始不断向上跳，直到跳到环上为止。标记链和环，其他点都指向它们

### Attention

1. 找经过**特定边的简单环**，断开它，然后用$bfs$或者$dfs$找最短路径
2. 找全图**最小环**，通过枚举起点，然后找环即可

参见**算法大全-图论篇**

## Code

写了一个有问题的$code$，问题在：没有找经过$sx$和$sy$的简单环，只找了经过其中某一个的简单环，估计会被$hack$

见同目录下$F.cpp$